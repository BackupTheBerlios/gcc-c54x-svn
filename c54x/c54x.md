(define_constants [
  (SP_REGNO 16)])

(define_insn "*ldqi_accs"
 [(set (match_operand:QI 0 "register_operand" "=c,c,  c,c")
	   (match_operand:QI 1 "general_operand"  " c,m<>,I,eh"))]
	   ""
	   "ld\t%1, %0")

(define_insn "*stqi"
  [(set (match_operand:QI 0 "general_operand"   "=m<>,m<>,m<>,eh")
		(match_operand:QI 1 "general_operand"   "c,   I,  f,  c"))]
		""
		"@
		stl\t%1, %0
		st\t%1, %0
		st\t%1, %0
		stlm\t%1,%0")

(define_insn "*mvmm"
  [(set (match_operand:QI 0 "register_operand" "=eh")
		(match_operand:QI 1 "register_operand" "eh"))]
		""
		"mvmm\t%1, %0")

(define_insn "*mvmd"
  [(set (match_operand:QI 0 "memory_operand" "=m<>")
		(match_operand:QI 1 "register_operand" "ehf"))]
		""
		"mvmd\t%1, %0")

(define_expand "movqi"
  [(set (match_operand:QI 0 "general_operand" "")
		(match_operand:QI 1 "general_operand" ""))]
		""
		"")

(define_insn "indirect_jump"
  [(set (pc) (match_operand:QI 0 "nonimmediate_operand" "c"))]
  ""
  "bacc\t%0")

(define_insn "jump"
  [(set (pc) (label_ref (match_operand 0 "" "")))]
  ""
  "b\t%0")

(define_expand "call_value"
  [(set (match_operand 0 "general_operand" "")
		(call (match_operand 1 "general_operand" "")
			  (match_operand 2 "general_operand" "")))]
			  ""
			  "")

(define_insn "call"
  [(call (match_operand 0 "general_operand" "c,Ii")
		 (match_operand 1 "general_operand" ""))]
		 ""
		 "@
         cala\t%0
         call\t%0")

(define_insn "pushqi"
  [(set (mem:QI (pre_dec:QI (reg:QI SP_REGNO)))
		(match_operand:QI 0 "general_operand" "eh,m<>"))]
		""
		"@
        pshm\t%0
        pshd\t%0")

(define_insn "popqi"
  [(set (match_operand:QI 0 "general_operand" "=eh,m<>")
		(mem:QI (post_inc:QI (reg:QI SP_REGNO))))]
		""
		"@
        popm\t%0
        popd\t%0")
  

(define_insn "return"
  [(return)]
  ""
  "ret")

(define_insn "nop"
  [(const_int 0)]
  ""
  "nop")

(define_expand "addqi3"
  [(set (match_operand:QI 0 "general_operand" "")
		(plus:QI (match_operand:QI 1 "general_operand" "")
				 (match_operand:QI 2 "general_operand" "")))]
				 ""
				 "")

(define_insn "*addqi"
  [(set (match_operand:QI 0 "register_operand" "=c,c,m<>")
	   (plus:QI (match_dup 0)
				(match_operand:QI 1 "general_operand" "m<>,I,I")))]
	   ""
	   "@
       add\t%1, %0
       add\t%1, %0
       addm\t%1, %0")
  

(define_expand "epilogue"
  [(return)])
